{"dependencies":[{"name":"@livechat/saga-utils","isAsync":false},{"name":"../../utils/serverRequest","isAsync":false},{"name":"redux-saga/effects","isAsync":false},{"name":"../../reducers","isAsync":false}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, module, exports, _dependencyMap) {\n  'use strict';\n\n  exports.__esModule = true;\n\n  var _sagaUtils = _$$_REQUIRE(_dependencyMap[0], '@livechat/saga-utils');\n\n  var _serverRequest = _$$_REQUIRE(_dependencyMap[1], '../../utils/serverRequest');\n\n  var _effects = _$$_REQUIRE(_dependencyMap[2], 'redux-saga/effects');\n\n  var _reducers = _$$_REQUIRE(_dependencyMap[3], '../../reducers');\n\n  var _marked = regeneratorRuntime.mark(closeChat);\n\n  function closeChat() {\n    var license, visitorId, securedToken, environment, closeChatData;\n    return regeneratorRuntime.wrap(function closeChat$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return (0, _effects.select)(_reducers.propsSelectors.getPropertyLicense);\n\n          case 2:\n            license = _context.sent;\n            _context.next = 5;\n            return (0, _effects.call)(_sagaUtils.waitForState, _reducers.propsSelectors.getPropertyVisitorId);\n\n          case 5:\n            visitorId = _context.sent;\n            _context.next = 8;\n            return (0, _effects.select)(_reducers.propsSelectors.getPropertySecuredToken);\n\n          case 8:\n            securedToken = _context.sent;\n            _context.next = 11;\n            return (0, _effects.select)(_reducers.getEnvironment);\n\n          case 11:\n            environment = _context.sent;\n            closeChatData = {\n              environment: environment,\n              license: license,\n              securedToken: securedToken,\n              body: {\n                source: 'visitor',\n                random_id: String(Math.random()),\n                visitor: {\n                  id: visitorId\n                }\n              }\n            };\n            _context.next = 15;\n            return (0, _effects.call)(_serverRequest.sendPostToWebserv, 'close_chat', closeChatData);\n\n          case 15:\n            return _context.abrupt('return', _context.sent);\n\n          case 16:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _marked, this);\n  }\n\n  exports.default = closeChat;\n});","map":[[2,0,1,0],[4,0,3,0,"exports"],[4,10,3,8,"__esModule"],[4,20,3,0],[4,23,3,21],[4,27,3,0],[6,0,5,0],[6,6,5,4,"_sagaUtils"],[6,19,5,17,"require"],[6,50,5,25],[6,72,5,17],[6,73,5,0],[8,0,7,0],[8,6,7,4,"_serverRequest"],[8,23,7,21,"require"],[8,54,7,29],[8,81,7,21],[8,82,7,0],[10,0,9,0],[10,6,9,4,"_effects"],[10,17,9,15,"require"],[10,48,9,23],[10,68,9,15],[10,69,9,0],[12,0,11,0],[12,6,11,4,"_reducers"],[12,18,11,16,"require"],[12,49,11,24],[12,65,11,16],[12,66,11,0],[14,0,13,0],[14,6,13,4,"_marked"],[14,16,13,27,"regeneratorRuntime"],[14,35,13,46,"mark"],[14,39,13,27],[14,40,13,51,"closeChat"],[14,49,13,27],[14,50,13,0],[16,0,15,0],[16,11,15,9,"closeChat"],[16,20,15,0],[16,23,15,21],[17,0,16,1],[17,8,16,5,"license"],[17,15,16,1],[17,17,16,14,"visitorId"],[17,26,16,1],[17,28,16,25,"securedToken"],[17,40,16,1],[17,42,16,39,"environment"],[17,53,16,1],[17,55,16,52,"closeChatData"],[17,68,16,1],[18,0,17,1],[18,11,17,8,"regeneratorRuntime"],[18,30,17,27,"wrap"],[18,34,17,8],[18,35,17,32],[18,44,17,41,"closeChat$"],[18,54,17,32],[18,55,17,52,"_context"],[18,63,17,32],[18,65,17,62],[19,0,18,2],[19,13,18,9],[19,14,18,2],[19,16,18,12],[20,0,19,3],[20,16,19,11,"_context"],[20,25,19,20,"prev"],[20,29,19,11],[20,32,19,27,"_context"],[20,41,19,36,"next"],[20,45,19,3],[21,0,20,4],[21,15,20,9],[21,16,20,4],[22,0,21,5,"_context"],[22,21,21,14,"next"],[22,25,21,5],[22,28,21,21],[22,29,21,5],[23,0,22,5],[23,19,22,12],[23,20,22,13],[23,23,22,16,"_effects"],[23,32,22,25,"select"],[23,38,22,12],[23,40,22,33,"_reducers"],[23,50,22,43,"propsSelectors"],[23,64,22,33],[23,65,22,58,"getPropertyLicense"],[23,83,22,12],[23,84,22,5],[25,0,24,4],[25,15,24,9],[25,16,24,4],[26,0,25,5,"license"],[26,22,25,15,"_context"],[26,31,25,24,"sent"],[26,35,25,5],[27,0,26,5,"_context"],[27,21,26,14,"next"],[27,25,26,5],[27,28,26,21],[27,29,26,5],[28,0,27,5],[28,19,27,12],[28,20,27,13],[28,23,27,16,"_effects"],[28,32,27,25,"call"],[28,36,27,12],[28,38,27,31,"_sagaUtils"],[28,49,27,42,"waitForState"],[28,61,27,12],[28,63,27,56,"_reducers"],[28,73,27,66,"propsSelectors"],[28,87,27,56],[28,88,27,81,"getPropertyVisitorId"],[28,108,27,12],[28,109,27,5],[30,0,29,4],[30,15,29,9],[30,16,29,4],[31,0,30,5,"visitorId"],[31,24,30,17,"_context"],[31,33,30,26,"sent"],[31,37,30,5],[32,0,31,5,"_context"],[32,21,31,14,"next"],[32,25,31,5],[32,28,31,21],[32,29,31,5],[33,0,32,5],[33,19,32,12],[33,20,32,13],[33,23,32,16,"_effects"],[33,32,32,25,"select"],[33,38,32,12],[33,40,32,33,"_reducers"],[33,50,32,43,"propsSelectors"],[33,64,32,33],[33,65,32,58,"getPropertySecuredToken"],[33,88,32,12],[33,89,32,5],[35,0,34,4],[35,15,34,9],[35,16,34,4],[36,0,35,5,"securedToken"],[36,27,35,20,"_context"],[36,36,35,29,"sent"],[36,40,35,5],[37,0,36,5,"_context"],[37,21,36,14,"next"],[37,25,36,5],[37,28,36,21],[37,30,36,5],[38,0,37,5],[38,19,37,12],[38,20,37,13],[38,23,37,16,"_effects"],[38,32,37,25,"select"],[38,38,37,12],[38,40,37,33,"_reducers"],[38,50,37,43,"getEnvironment"],[38,64,37,12],[38,65,37,5],[40,0,39,4],[40,15,39,9],[40,17,39,4],[41,0,40,5,"environment"],[41,26,40,19,"_context"],[41,35,40,28,"sent"],[41,39,40,5],[42,0,41,5,"closeChatData"],[42,28,41,21],[43,0,42,6,"environment"],[43,27,42,19,"environment"],[43,38,41,21],[44,0,43,6,"license"],[44,23,43,15,"license"],[44,30,41,21],[45,0,44,6,"securedToken"],[45,28,44,20,"securedToken"],[45,40,41,21],[46,0,45,6,"body"],[46,20,45,12],[47,0,46,7,"source"],[47,24,46,15],[47,33,45,12],[48,0,47,7,"random_id"],[48,27,47,18,"String"],[48,34,47,25,"Math"],[48,39,47,30,"random"],[48,45,47,25],[48,47,47,18],[48,48,45,12],[49,0,48,7,"visitor"],[49,25,48,16],[50,0,49,8,"id"],[50,22,49,12,"visitorId"],[51,0,48,16],[52,0,45,12],[53,0,41,21],[53,13,41,5],[54,0,53,5,"_context"],[54,21,53,14,"next"],[54,25,53,5],[54,28,53,21],[54,30,53,5],[55,0,54,5],[55,19,54,12],[55,20,54,13],[55,23,54,16,"_effects"],[55,32,54,25,"call"],[55,36,54,12],[55,38,54,31,"_serverRequest"],[55,53,54,46,"sendPostToWebserv"],[55,70,54,12],[55,72,54,65],[55,84,54,12],[55,86,54,79,"closeChatData"],[55,99,54,12],[55,100,54,5],[57,0,56,4],[57,15,56,9],[57,17,56,4],[58,0,57,5],[58,19,57,12,"_context"],[58,28,57,21,"abrupt"],[58,34,57,12],[58,35,57,28],[58,43,57,12],[58,45,57,38,"_context"],[58,54,57,47,"sent"],[58,58,57,12],[58,59,57,5],[60,0,59,4],[60,15,59,9],[60,17,59,4],[61,0,60,4],[61,15,60,9],[61,20,60,4],[62,0,61,5],[62,19,61,12,"_context"],[62,28,61,21,"stop"],[62,32,61,12],[62,34,61,5],[63,0,19,3],[64,0,63,3],[65,0,64,2],[65,5,17,8],[65,7,64,4,"_marked"],[65,14,17,8],[65,16,64,13],[65,20,17,8],[65,21,17,1],[66,0,65,1],[68,0,67,0,"exports"],[68,10,67,8,"default"],[68,17,67,0],[68,20,67,18,"closeChat"],[68,29,67,0]]},"type":"js/module"}]}