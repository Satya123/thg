{"dependencies":[{"name":"./utils","isAsync":false}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  exports.__esModule = true;\n  exports.buffers = exports.BUFFER_OVERFLOW = undefined;\n\n  var _utils = _$$_REQUIRE(_dependencyMap[0], \"./utils\");\n\n  var BUFFER_OVERFLOW = exports.BUFFER_OVERFLOW = \"Channel's Buffer overflow!\";\n  var ON_OVERFLOW_THROW = 1;\n  var ON_OVERFLOW_DROP = 2;\n  var ON_OVERFLOW_SLIDE = 3;\n  var ON_OVERFLOW_EXPAND = 4;\n  var zeroBuffer = {\n    isEmpty: _utils.kTrue,\n    put: _utils.noop,\n    take: _utils.noop\n  };\n\n  function ringBuffer() {\n    var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n    var overflowAction = arguments[1];\n    var arr = new Array(limit);\n    var length = 0;\n    var pushIndex = 0;\n    var popIndex = 0;\n\n    var push = function push(it) {\n      arr[pushIndex] = it;\n      pushIndex = (pushIndex + 1) % limit;\n      length++;\n    };\n\n    var take = function take() {\n      if (length != 0) {\n        var it = arr[popIndex];\n        arr[popIndex] = null;\n        length--;\n        popIndex = (popIndex + 1) % limit;\n        return it;\n      }\n    };\n\n    var flush = function flush() {\n      var items = [];\n\n      while (length) {\n        items.push(take());\n      }\n\n      return items;\n    };\n\n    return {\n      isEmpty: function isEmpty() {\n        return length == 0;\n      },\n      put: function put(it) {\n        if (length < limit) {\n          push(it);\n        } else {\n          var doubledLimit = void 0;\n\n          switch (overflowAction) {\n            case ON_OVERFLOW_THROW:\n              throw new Error(BUFFER_OVERFLOW);\n\n            case ON_OVERFLOW_SLIDE:\n              arr[pushIndex] = it;\n              pushIndex = (pushIndex + 1) % limit;\n              popIndex = pushIndex;\n              break;\n\n            case ON_OVERFLOW_EXPAND:\n              doubledLimit = 2 * limit;\n              arr = flush();\n              length = arr.length;\n              pushIndex = arr.length;\n              popIndex = 0;\n              arr.length = doubledLimit;\n              limit = doubledLimit;\n              push(it);\n              break;\n\n            default:\n          }\n        }\n      },\n      take: take,\n      flush: flush\n    };\n  }\n\n  var buffers = exports.buffers = {\n    none: function none() {\n      return zeroBuffer;\n    },\n    fixed: function fixed(limit) {\n      return ringBuffer(limit, ON_OVERFLOW_THROW);\n    },\n    dropping: function dropping(limit) {\n      return ringBuffer(limit, ON_OVERFLOW_DROP);\n    },\n    sliding: function sliding(limit) {\n      return ringBuffer(limit, ON_OVERFLOW_SLIDE);\n    },\n    expanding: function expanding(initialSize) {\n      return ringBuffer(initialSize, ON_OVERFLOW_EXPAND);\n    }\n  };\n});","map":[[2,0,1,0],[4,0,3,0,"exports"],[4,10,3,8,"__esModule"],[4,20,3,0],[4,23,3,21],[4,27,3,0],[5,0,4,0,"exports"],[5,10,4,8,"buffers"],[5,17,4,0],[5,20,4,18,"exports"],[5,28,4,26,"BUFFER_OVERFLOW"],[5,43,4,18],[5,46,4,44,"undefined"],[5,55,4,0],[7,0,6,0],[7,6,6,4,"_utils"],[7,15,6,13,"require"],[7,46,6,21],[7,55,6,13],[7,56,6,0],[9,0,8,0],[9,6,8,4,"BUFFER_OVERFLOW"],[9,24,8,22,"exports"],[9,32,8,30,"BUFFER_OVERFLOW"],[9,47,8,22],[9,50,8,48],[9,78,8,0],[10,0,10,0],[10,6,10,4,"ON_OVERFLOW_THROW"],[10,26,10,24],[10,27,10,0],[11,0,11,0],[11,6,11,4,"ON_OVERFLOW_DROP"],[11,25,11,23],[11,26,11,0],[12,0,12,0],[12,6,12,4,"ON_OVERFLOW_SLIDE"],[12,26,12,24],[12,27,12,0],[13,0,13,0],[13,6,13,4,"ON_OVERFLOW_EXPAND"],[13,27,13,25],[13,28,13,0],[14,0,15,0],[14,6,15,4,"zeroBuffer"],[14,19,15,17],[15,0,15,19,"isEmpty"],[15,13,15,28,"_utils"],[15,20,15,35,"kTrue"],[15,25,15,17],[16,0,15,42,"put"],[16,9,15,47,"_utils"],[16,16,15,54,"noop"],[16,20,15,17],[17,0,15,60,"take"],[17,10,15,66,"_utils"],[17,17,15,73,"noop"],[18,0,15,17],[18,3,15,0],[20,0,17,0],[20,11,17,9,"ringBuffer"],[20,21,17,0],[20,24,17,22],[21,0,18,2],[21,8,18,6,"limit"],[21,16,18,14,"arguments"],[21,26,18,24,"length"],[21,32,18,14],[21,35,18,33],[21,36,18,14],[21,40,18,38,"arguments"],[21,50,18,48],[21,51,18,38],[21,57,18,55,"undefined"],[21,66,18,14],[21,69,18,67,"arguments"],[21,79,18,77],[21,80,18,67],[21,81,18,14],[21,84,18,82],[21,86,18,2],[22,0,19,2],[22,8,19,6,"overflowAction"],[22,25,19,23,"arguments"],[22,35,19,33],[22,36,19,23],[22,37,19,2],[23,0,21,2],[23,8,21,6,"arr"],[23,14,21,12],[23,18,21,16,"Array"],[23,23,21,12],[23,24,21,22,"limit"],[23,29,21,12],[23,30,21,2],[24,0,22,2],[24,8,22,6,"length"],[24,17,22,15],[24,18,22,2],[25,0,23,2],[25,8,23,6,"pushIndex"],[25,20,23,18],[25,21,23,2],[26,0,24,2],[26,8,24,6,"popIndex"],[26,19,24,17],[26,20,24,2],[28,0,26,2],[28,8,26,6,"push"],[28,15,26,13],[28,24,26,22,"push"],[28,28,26,13],[28,29,26,27,"it"],[28,31,26,13],[28,33,26,31],[29,0,27,4,"arr"],[29,10,27,8,"pushIndex"],[29,19,27,4],[29,23,27,21,"it"],[29,25,27,4],[30,0,28,4,"pushIndex"],[30,18,28,16],[30,19,28,17,"pushIndex"],[30,31,28,29],[30,32,28,16],[30,36,28,34,"limit"],[30,41,28,4],[31,0,29,4,"length"],[32,0,30,3],[32,5,26,2],[34,0,32,2],[34,8,32,6,"take"],[34,15,32,13],[34,24,32,22,"take"],[34,28,32,13],[34,31,32,29],[35,0,33,4],[35,10,33,8,"length"],[35,20,33,18],[35,21,33,4],[35,23,33,21],[36,0,34,6],[36,12,34,10,"it"],[36,17,34,15,"arr"],[36,21,34,19,"popIndex"],[36,29,34,15],[36,30,34,6],[37,0,35,6,"arr"],[37,12,35,10,"popIndex"],[37,20,35,6],[37,24,35,22],[37,28,35,6],[38,0,36,6,"length"],[39,0,37,6,"popIndex"],[39,19,37,17],[39,20,37,18,"popIndex"],[39,31,37,29],[39,32,37,17],[39,36,37,34,"limit"],[39,41,37,6],[40,0,38,6],[40,15,38,13,"it"],[40,17,38,6],[41,0,39,5],[42,0,40,3],[42,5,32,2],[44,0,42,2],[44,8,42,6,"flush"],[44,16,42,14],[44,25,42,23,"flush"],[44,30,42,14],[44,33,42,31],[45,0,43,4],[45,10,43,8,"items"],[45,18,43,16],[45,20,43,4],[47,0,44,4],[47,13,44,11,"length"],[47,19,44,4],[47,21,44,19],[48,0,45,6,"items"],[48,14,45,12,"push"],[48,18,45,6],[48,19,45,17,"take"],[48,25,45,6],[49,0,46,5],[51,0,47,4],[51,13,47,11,"items"],[51,18,47,4],[52,0,48,3],[52,5,42,2],[54,0,50,2],[54,11,50,9],[55,0,51,4,"isEmpty"],[55,15,51,13],[55,24,51,22,"isEmpty"],[55,31,51,13],[55,34,51,32],[56,0,52,6],[56,15,52,13,"length"],[56,25,52,23],[56,26,52,6],[57,0,53,5],[57,7,50,9],[58,0,54,4,"put"],[58,11,54,9],[58,20,54,18,"put"],[58,23,54,9],[58,24,54,22,"it"],[58,26,54,9],[58,28,54,26],[59,0,55,6],[59,12,55,10,"length"],[59,21,55,19,"limit"],[59,26,55,6],[59,28,55,26],[60,0,56,8,"push"],[60,15,56,13,"it"],[60,17,56,8],[61,0,57,7],[61,9,55,6],[61,15,57,13],[62,0,58,8],[62,14,58,12,"doubledLimit"],[62,29,58,27],[62,34,58,32],[62,35,58,8],[64,0,59,8],[64,18,59,16,"overflowAction"],[64,32,59,8],[65,0,60,10],[65,17,60,15,"ON_OVERFLOW_THROW"],[65,34,60,10],[66,0,61,12],[66,20,61,18],[66,24,61,22,"Error"],[66,29,61,18],[66,30,61,28,"BUFFER_OVERFLOW"],[66,45,61,18],[66,46,61,12],[68,0,62,10],[68,17,62,15,"ON_OVERFLOW_SLIDE"],[68,34,62,10],[69,0,63,12,"arr"],[69,18,63,16,"pushIndex"],[69,27,63,12],[69,31,63,29,"it"],[69,33,63,12],[70,0,64,12,"pushIndex"],[70,26,64,24],[70,27,64,25,"pushIndex"],[70,39,64,37],[70,40,64,24],[70,44,64,42,"limit"],[70,49,64,12],[71,0,65,12,"popIndex"],[71,25,65,23,"pushIndex"],[71,34,65,12],[72,0,66,12],[74,0,67,10],[74,17,67,15,"ON_OVERFLOW_EXPAND"],[74,35,67,10],[75,0,68,12,"doubledLimit"],[75,29,68,27],[75,33,68,31,"limit"],[75,38,68,12],[76,0,70,12,"arr"],[76,20,70,18,"flush"],[76,27,70,12],[77,0,72,12,"length"],[77,23,72,21,"arr"],[77,27,72,25,"length"],[77,33,72,12],[78,0,73,12,"pushIndex"],[78,26,73,24,"arr"],[78,30,73,28,"length"],[78,36,73,12],[79,0,74,12,"popIndex"],[79,25,74,23],[79,26,74,12],[80,0,76,12,"arr"],[80,18,76,16,"length"],[80,24,76,12],[80,27,76,25,"doubledLimit"],[80,39,76,12],[81,0,77,12,"limit"],[81,22,77,20,"doubledLimit"],[81,34,77,12],[82,0,79,12,"push"],[82,19,79,17,"it"],[82,21,79,12],[83,0,80,12],[85,0,81,10],[86,0,59,8],[87,0,84,7],[88,0,85,5],[88,7,50,9],[89,0,86,4,"take"],[89,12,86,10,"take"],[89,16,50,9],[90,0,87,4,"flush"],[90,13,87,11,"flush"],[91,0,50,9],[91,5,50,2],[92,0,89,1],[94,0,91,0],[94,6,91,4,"buffers"],[94,16,91,14,"exports"],[94,24,91,22,"buffers"],[94,31,91,14],[94,34,91,32],[95,0,92,2,"none"],[95,10,92,8],[95,19,92,17,"none"],[95,23,92,8],[95,26,92,24],[96,0,93,4],[96,13,93,11,"zeroBuffer"],[96,23,93,4],[97,0,94,3],[97,5,91,32],[98,0,95,2,"fixed"],[98,11,95,9],[98,20,95,18,"fixed"],[98,25,95,9],[98,26,95,24,"limit"],[98,31,95,9],[98,33,95,31],[99,0,96,4],[99,13,96,11,"ringBuffer"],[99,24,96,22,"limit"],[99,29,96,11],[99,31,96,29,"ON_OVERFLOW_THROW"],[99,48,96,11],[99,49,96,4],[100,0,97,3],[100,5,91,32],[101,0,98,2,"dropping"],[101,14,98,12],[101,23,98,21,"dropping"],[101,31,98,12],[101,32,98,30,"limit"],[101,37,98,12],[101,39,98,37],[102,0,99,4],[102,13,99,11,"ringBuffer"],[102,24,99,22,"limit"],[102,29,99,11],[102,31,99,29,"ON_OVERFLOW_DROP"],[102,47,99,11],[102,48,99,4],[103,0,100,3],[103,5,91,32],[104,0,101,2,"sliding"],[104,13,101,11],[104,22,101,20,"sliding"],[104,29,101,11],[104,30,101,28,"limit"],[104,35,101,11],[104,37,101,35],[105,0,102,4],[105,13,102,11,"ringBuffer"],[105,24,102,22,"limit"],[105,29,102,11],[105,31,102,29,"ON_OVERFLOW_SLIDE"],[105,48,102,11],[105,49,102,4],[106,0,103,3],[106,5,91,32],[107,0,104,2,"expanding"],[107,15,104,13],[107,24,104,22,"expanding"],[107,33,104,13],[107,34,104,32,"initialSize"],[107,45,104,13],[107,47,104,45],[108,0,105,4],[108,13,105,11,"ringBuffer"],[108,24,105,22,"initialSize"],[108,35,105,11],[108,37,105,35,"ON_OVERFLOW_EXPAND"],[108,55,105,11],[108,56,105,4],[109,0,106,3],[110,0,91,32],[110,3,91,0]]},"type":"js/module"}]}