{"dependencies":[{"name":"react","isAsync":false},{"name":"react-native","isAsync":false},{"name":"react-native-device-info","isAsync":false},{"name":"apisauce","isAsync":false}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _react = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[0], \"react\"));\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[1], \"react-native\");\n\n  var _reactNativeDeviceInfo = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"react-native-device-info\"));\n\n  var _apisauce = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"apisauce\"));\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  var createAPI = function createAPI() {\n    var baseURL = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'https://itunes.apple.com/';\n\n    var api = _apisauce.default.create({\n      baseURL: baseURL,\n      headers: {\n        'Cache-Control': 'no-cache',\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      timeout: 10000\n    });\n\n    return {\n      getLatest: function getLatest(bundleId) {\n        return api.get('lookup', {\n          bundleId: bundleId\n        });\n      }\n    };\n  };\n\n  var performCheck = function performCheck() {\n    var updateIsAvailable = false;\n    var api = createAPI();\n\n    var bundleId = _reactNativeDeviceInfo.default.getBundleId();\n\n    return api.getLatest(bundleId).then(function (response) {\n      var latestInfo = null;\n\n      if (response.ok && response.data.resultCount === 1) {\n        latestInfo = response.data.results[0];\n        updateIsAvailable = latestInfo.version !== _reactNativeDeviceInfo.default.getVersion();\n      }\n\n      return _objectSpread({\n        updateIsAvailable: updateIsAvailable\n      }, latestInfo);\n    });\n  };\n\n  var attemptUpgrade = function attemptUpgrade(appId) {\n    var itunesURI = \"itmss://itunes.apple.com/app/id\" + appId + \"?mt=8\";\n    var itunesURL = \"https://itunes.apple.com/app/id\" + appId + \"?mt=8\";\n\n    _reactNative.Linking.canOpenURL(itunesURI).then(function (supported) {\n      if (supported) {\n        _reactNative.Linking.openURL(itunesURI);\n      } else {\n        _reactNative.Linking.openURL(itunesURL);\n      }\n    });\n  };\n\n  var showUpgradePrompt = function showUpgradePrompt(appId) {\n    _reactNative.Alert.alert('Update Available', 'There is an updated version available on the App Store.  Would you like to upgrade?', [{\n      text: 'Upgrade',\n      onPress: function onPress() {\n        return attemptUpgrade(appId);\n      }\n    }, {\n      text: 'Cancel'\n    }]);\n  };\n\n  var promptUser = function promptUser() {\n    performCheck().then(function (sirenResult) {\n      if (sirenResult.updateIsAvailable) showUpgradePrompt(sirenResult.trackId);\n    });\n  };\n\n  var _default = {\n    promptUser: promptUser\n  };\n  exports.default = _default;\n});","map":[[7,0,1,0],[9,0,2,0],[11,0,3,0],[13,0,4,0],[21,0,6,0],[21,6,6,6,"createAPI"],[21,18,6,18],[21,27,6,6,"createAPI"],[21,36,6,18],[21,39,6,61],[22,0,6,61],[22,8,6,19,"baseURL"],[22,15,6,61],[22,86,6,29],[22,113,6,61],[24,0,7,2],[24,8,7,8,"api"],[24,14,7,14,"apisauce"],[24,32,7,23,"create"],[24,38,7,14],[24,39,7,30],[25,0,8,4,"baseURL"],[25,22,7,30],[26,0,9,4,"headers"],[26,15,9,13],[27,0,10,6],[27,25,10,23],[27,35,9,13],[28,0,11,6],[28,24,11,22],[28,42,9,13],[29,0,12,6],[29,18,12,16],[30,0,9,13],[30,7,7,30],[31,0,14,4,"timeout"],[31,15,14,13],[32,0,7,30],[32,5,7,14],[32,6,7,2],[34,0,17,2],[34,11,17,9],[35,0,18,4,"getLatest"],[35,17,18,15],[35,36,18,16,"bundleId"],[35,44,18,15],[36,0,18,15],[36,15,18,29,"api"],[36,19,18,33,"get"],[36,22,18,29],[36,23,18,37],[36,31,18,29],[36,33,18,47],[37,0,18,48,"bundleId"],[38,0,18,47],[38,9,18,29],[38,10,18,15],[39,0,18,15],[40,0,17,9],[40,5,17,2],[41,0,20,1],[41,3,6,0],[43,0,22,0],[43,6,22,6,"performCheck"],[43,21,22,21],[43,30,22,6,"performCheck"],[43,42,22,21],[43,45,22,27],[44,0,23,2],[44,8,23,6,"updateIsAvailable"],[44,28,23,26],[44,33,23,2],[45,0,24,2],[45,8,24,8,"api"],[45,14,24,14,"createAPI"],[45,25,24,2],[47,0,25,2],[47,8,25,8,"bundleId"],[47,19,25,19,"DeviceInfo"],[47,50,25,30,"getBundleId"],[47,61,25,19],[47,63,25,2],[49,0,28,2],[49,11,28,9,"api"],[49,15,28,13,"getLatest"],[49,24,28,9],[49,25,28,23,"bundleId"],[49,33,28,9],[49,35,28,33,"then"],[49,39,28,9],[49,40,28,38],[49,60,28,50],[50,0,29,4],[50,10,29,8,"latestInfo"],[50,23,29,21],[50,27,29,4],[52,0,31,4],[52,10,31,8,"response"],[52,19,31,17,"ok"],[52,21,31,8],[52,25,31,23,"response"],[52,34,31,32,"data"],[52,38,31,23],[52,39,31,37,"resultCount"],[52,50,31,23],[52,55,31,53],[52,56,31,4],[52,58,31,56],[53,0,32,6,"latestInfo"],[53,21,32,19,"response"],[53,30,32,28,"data"],[53,34,32,19],[53,35,32,33,"results"],[53,42,32,19],[53,43,32,41],[53,44,32,19],[53,45,32,6],[54,0,34,6,"updateIsAvailable"],[54,28,34,26,"latestInfo"],[54,39,34,37,"version"],[54,46,34,26],[54,51,34,49,"DeviceInfo"],[54,82,34,60,"getVersion"],[54,92,34,49],[54,94,34,6],[55,0,35,5],[57,0,37,4],[58,0,37,12,"updateIsAvailable"],[59,0,37,4],[59,9,37,34,"latestInfo"],[59,19,37,4],[60,0,38,3],[60,5,28,9],[60,6,28,2],[61,0,39,1],[61,3,22,0],[63,0,41,0],[63,6,41,6,"attemptUpgrade"],[63,23,41,23],[63,32,41,6,"attemptUpgrade"],[63,46,41,23],[63,47,41,24,"appId"],[63,52,41,23],[63,54,41,34],[64,0,43,2],[64,8,43,8,"itunesURI"],[64,56,43,54,"appId"],[64,61,43,8],[64,71,43,2],[65,0,44,2],[65,8,44,8,"itunesURL"],[65,56,44,54,"appId"],[65,61,44,8],[65,71,44,2],[67,0,46,2,"Linking"],[67,25,46,10,"canOpenURL"],[67,35,46,2],[67,36,46,21,"itunesURI"],[67,45,46,2],[67,47,46,32,"then"],[67,51,46,2],[67,52,46,37],[67,73,46,50],[68,0,47,4],[68,10,47,8,"supported"],[68,19,47,4],[68,21,47,19],[69,0,48,6,"Linking"],[69,29,48,14,"openURL"],[69,36,48,6],[69,37,48,22,"itunesURI"],[69,46,48,6],[70,0,49,5],[70,7,47,4],[70,13,49,11],[71,0,50,6,"Linking"],[71,29,50,14,"openURL"],[71,36,50,6],[71,37,50,22,"itunesURL"],[71,46,50,6],[72,0,51,5],[73,0,52,3],[73,5,46,2],[74,0,53,1],[74,3,41,0],[76,0,55,0],[76,6,55,6,"showUpgradePrompt"],[76,26,55,26],[76,35,55,6,"showUpgradePrompt"],[76,52,55,26],[76,53,55,27,"appId"],[76,58,55,26],[76,60,55,37],[77,0,56,2,"Alert"],[77,23,56,8,"alert"],[77,28,56,2],[77,29,57,4],[77,47,56,2],[77,49,58,4],[77,134,56,2],[77,136,59,4],[77,137,60,6],[78,0,60,7,"text"],[78,12,60,13],[78,21,60,6],[79,0,60,24,"onPress"],[79,15,60,33],[80,0,60,33],[80,15,60,39,"attemptUpgrade"],[80,30,60,54,"appId"],[80,35,60,39],[80,36,60,33],[81,0,60,33],[82,0,60,6],[82,5,59,4],[82,7,61,6],[83,0,61,7,"text"],[83,12,61,13],[84,0,61,6],[84,5,59,4],[84,6,56,2],[85,0,64,1],[85,3,55,0],[87,0,66,0],[87,6,66,6,"promptUser"],[87,19,66,19],[87,28,66,6,"promptUser"],[87,38,66,19],[87,41,66,25],[88,0,67,2,"performCheck"],[88,19,67,17,"then"],[88,23,67,2],[88,24,67,22],[88,47,67,37],[89,0,68,4],[89,10,68,8,"sirenResult"],[89,22,68,20,"updateIsAvailable"],[89,39,68,4],[89,41,68,39,"showUpgradePrompt"],[89,59,68,57,"sirenResult"],[89,71,68,69,"trackId"],[89,78,68,39],[90,0,69,3],[90,5,67,2],[91,0,70,1],[91,3,66,0],[93,17,72,15],[94,0,73,2,"promptUser"],[95,0,72,15],[95,3]]},"type":"js/module"}]}